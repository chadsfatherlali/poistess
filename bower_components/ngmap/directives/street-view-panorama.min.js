(function(){var a=function(d){var e=d;var b=function(k,h,j){var i,f;if(h.container){f=document.getElementById(h.container);f=f||document.querySelector(h.container)}if(f){i=new google.maps.StreetViewPanorama(f,h)}else{i=k.getStreetView();i.setOptions(h)}for(var g in j){g&&google.maps.event.addListener(i,g,j[g])}return i};var c=function(n,h,m,f){var g=e.orgAttributes(h);var j=e.filter(m);var o=e.getOptions(j);var k=e.getControlOptions(j);var l=angular.extend(o,k);var i=e.getEvents(n,j);console.log("street-view-panorama","options",l,"events",i);n.$on("mapInitialized",function(p,s){var q=b(s,l,i);s.setStreetView(q);(!q.getPosition())&&q.setPosition(s.getCenter());google.maps.event.addListener(q,"position_changed",function(){if(q.getPosition()!==s.getCenter()){s.setCenter(q.getPosition())}});var r=google.maps.event.addListener(s,"center_changed",function(){q.setPosition(s.getCenter());google.maps.event.removeListener(r)})})};return{restrict:"E",require:"^map",link:c}};a.$inject=["Attr2Options"];angular.module("ngMap").directive("streetViewPanorama",a)})();