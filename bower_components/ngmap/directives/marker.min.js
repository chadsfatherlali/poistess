(function(){var b=function(f,h){var d;if(f.icon instanceof Object){if((""+f.icon.path).match(/^[A-Z_]+$/)){f.icon.path=google.maps.SymbolPath[f.icon.path]}for(var g in f.icon){var c=f.icon[g];if(g=="anchor"||g=="origin"){f.icon[g]=new google.maps.Point(c[0],c[1])}else{if(g=="size"||g=="scaledSize"){f.icon[g]=new google.maps.Size(c[0],c[1])}}}}if(!(f.position instanceof google.maps.LatLng)){f.position=new google.maps.LatLng(0,0)}d=new google.maps.Marker(f);if(Object.keys(h).length>0){console.log("markerEvents",h)}for(var e in h){if(e){google.maps.event.addListener(d,e,h[e])}}return d};var a=function(d,e){var f=d;var c=function(p,k,n,g){var i=f.orgAttributes(k);var l=f.filter(n);var h=f.getOptions(l,p);var o=f.getEvents(p,l);console.log("marker options",h,"events",o);var m;if(!(h.position instanceof google.maps.LatLng)){m=h.position}var j=b(h,o);g.addObject("markers",j);if(m){g.getGeoLocation(m).then(function(r){j.setPosition(r);h.centered&&j.map.setCenter(r);var q=n.geoCallback;q&&e(q)(p)})}g.observeAttrSetObj(i,n,j);k.bind("$destroy",function(){g.deleteObject("markers",j)})};return{restrict:"E",require:"^map",link:c}};a.$inject=["Attr2Options","$parse"];angular.module("ngMap").directive("marker",a)})();