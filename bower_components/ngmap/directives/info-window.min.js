(function(){var a=function(e,d,c,f){var h=e;var g=function(j,m,l){var k;if(j.position&&!(j.position instanceof google.maps.LatLng)){delete j.position}k=new google.maps.InfoWindow(j);if(Object.keys(m).length>0){console.log("infoWindow events",m)}for(var i in m){if(i){google.maps.event.addListener(k,i,m[i])}}var n=l.html().trim();if(angular.element(n).length!=1){throw"info-window working as a template must have a container"}k.__template=n.replace(/\s?ng-non-bindable[='"]+/,"");k.__compile=function(q,o){o&&(q["this"]=o);var p=d(k.__template)(q);k.setContent(p[0]);q.$apply()};k.__open=function(q,p,o){c(function(){k.__compile(p,o);if(o&&o.getPosition){k.open(q,o)}else{if(o&&o instanceof google.maps.LatLng){k.open(q);k.setPosition(o)}else{k.open(q)}}})};return k};var b=function(p,l,o,i){l.css("display","none");var j=h.orgAttributes(l);var m=h.filter(o);var r=h.getOptions(m,p);var q=h.getEvents(p,m);console.log("infoWindow","options",r,"events",q);var n;if(r.position&&!(r.position instanceof google.maps.LatLng)){n=r.position}var k=g(r,q,l);if(n){i.getGeoLocation(n).then(function(t){k.setPosition(t);k.__open(i.map,p,t);var s=o.geoCallback;s&&f(s)(p)})}i.addObject("infoWindows",k);i.observeAttrSetObj(j,o,k);p.$on("mapInitialized",function(s,u){k.visible&&k.__open(u,p);if(k.visibleOnMarker){var t=k.visibleOnMarker;k.__open(u,p,u.markers[t])}});p.showInfoWindow=function(v,w,s){var u=i.map.infoWindows[w];var t=s?s:(this.getPosition?this:null);u.__open(i.map,p,t)};p.hideInfoWindow=p.hideInfoWindow||function(t,u){var s=i.map.infoWindows[u];s.close()}};return{restrict:"E",require:"^map",link:b}};a.$inject=["Attr2Options","$compile","$timeout","$parse"];angular.module("ngMap").directive("infoWindow",a)})();