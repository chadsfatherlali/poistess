/*!
 * Angular Material Design
 * https://github.com/angular/material
 * @license MIT
 * v0.11.1-master-eacca5e
 */
;goog.provide("ng.material.components.sticky");goog.require("ng.material.components.content");goog.require("ng.material.core");angular.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",MdSticky);function MdSticky(o,r,l,q){var p=k();return function m(b,c,a){var d=c.controller("mdContent");if(!d){return}if(p){c.css({position:p,top:0,"z-index":2})}else{var e=d.$element.data("$$sticky");if(!e){e=n(d);d.$element.data("$$sticky",e)}var f=e.add(c,a||c.clone());b.$on("$destroy",f)}};function n(h){var i=h.$element;var b=l.throttle(f);j(i);i.on("$scrollstart",b);i.on("$scroll",c);var u;return u={prev:null,current:null,next:null,items:[],add:v,refreshElements:f};function v(y,s){s.addClass("md-sticky-clone");var t={element:y,clone:s};u.items.push(t);q.nextTick(function(){i.prepend(t.clone)});b();return function z(){u.items.forEach(function(w,x){if(w.element[0]===y[0]){u.items.splice(x,1);w.clone.remove()}});b()}}function f(){u.items.forEach(e);u.items=u.items.sort(function(z,w){return z.top<w.top?-1:1});var t;var s=i.prop("scrollTop");for(var x=u.items.length-1;x>=0;x--){if(s>u.items[x].top){t=u.items[x];break}}d(t)}function e(t){var s=t.element[0];t.top=0;t.left=0;while(s&&s!==i[0]){t.top+=s.offsetTop;t.left+=s.offsetLeft;s=s.offsetParent}t.height=t.element.prop("offsetHeight");t.clone.css("margin-left",t.left+"px");if(q.floatingScrollbars()){t.clone.css("margin-right","0")}}function c(){var t=i.prop("scrollTop");var s=t>(c.prevScrollTop||0);c.prevScrollTop=t;if(t===0){d(null);return}if(s){if(u.next&&u.next.top<=t){d(u.next);return}if(u.current&&u.next&&u.next.top-t<=u.next.height){g(u.current,t+(u.next.top-u.next.height-t));return}}if(!s){if(u.current&&u.prev&&t<u.current.top){d(u.prev);return}if(u.next&&u.current&&(t>=(u.next.top-u.current.height))){g(u.current,t+(u.next.top-t-u.current.height));return}}if(u.current){g(u.current,t)}}function d(s){if(u.current===s){return}if(u.current){g(u.current,null);a(u.current,null)}if(s){a(s,"active")}u.current=s;var t=u.items.indexOf(s);u.next=u.items[t+1];u.prev=u.items[t-1];a(u.next,"next");a(u.prev,"prev")}function a(t,s){if(!t||t.state===s){return}if(t.state){t.clone.attr("sticky-prev-state",t.state);t.element.attr("sticky-prev-state",t.state)}t.clone.attr("sticky-state",s);t.element.attr("sticky-state",s);t.state=s}function g(s,t){if(!s){return}if(t===null||t===undefined){if(s.translateY){s.translateY=null;s.clone.css(r.CSS.TRANSFORM,"")}}else{s.translateY=t;s.clone.css(r.CSS.TRANSFORM,"translate3d("+s.left+"px,"+t+"px,0)")}}}function k(a){var c;var e=angular.element("<div>");o[0].body.appendChild(e[0]);var d=["sticky","-webkit-sticky"];for(var b=0;b<d.length;++b){e.css({position:d[b],top:0,"z-index":2});if(e.css("position")==d[b]){c=d[b];break}}e.remove();return c}function j(c){var a=200;var e;var d;c.on("scroll touchmove",function(){if(!e){e=true;l.throttle(b);c.triggerHandler("$scrollstart")}c.triggerHandler("$scroll");d=+q.now()});function b(){if(+q.now()-d>a){e=false;c.triggerHandler("$scrollend")}else{c.triggerHandler("$scroll");l.throttle(b)}}}}MdSticky.$inject=["$document","$mdConstant","$$rAF","$mdUtil"];ng.material.components.sticky=angular.module("material.components.sticky");