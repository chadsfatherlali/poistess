/*!
 * Angular Material Design
 * https://github.com/angular/material
 * @license MIT
 * v0.11.2-master-71674b0
 */
;goog.provide("ng.material.components.sticky");goog.require("ng.material.components.content");goog.require("ng.material.core");angular.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",MdSticky);function MdSticky(d,a,g,b){var c=h();return function f(l,k,m){var j=k.controller("mdContent");if(!j){return}if(c){k.css({position:c,top:0,"z-index":2})}else{var o=j.$element.data("$$sticky");if(!o){o=e(j);j.$element.data("$$sticky",o)}var n=o.add(k,m||k.clone());l.$on("$destroy",n)}};function e(k){var j=k.$element;var q=g.throttle(m);i(j);j.on("$scrollstart",q);j.on("$scroll",p);var t;return t={prev:null,current:null,next:null,items:[],add:s,refreshElements:m};function s(v,x){x.addClass("md-sticky-clone");var w={element:v,clone:x};t.items.push(w);b.nextTick(function(){j.prepend(w.clone)});q();return function u(){t.items.forEach(function(z,y){if(z.element[0]===v[0]){t.items.splice(y,1);z.clone.remove()}});q()}}function m(){t.items.forEach(n);t.items=t.items.sort(function(y,x){return y.top<x.top?-1:1});var v;var w=j.prop("scrollTop");for(var u=t.items.length-1;u>=0;u--){if(w>t.items[u].top){v=t.items[u];break}}o(v)}function n(u){var v=u.element[0];u.top=0;u.left=0;while(v&&v!==j[0]){u.top+=v.offsetTop;u.left+=v.offsetLeft;v=v.offsetParent}u.height=u.element.prop("offsetHeight");u.clone.css("margin-left",u.left+"px");if(b.floatingScrollbars()){u.clone.css("margin-right","0")}}function p(){var u=j.prop("scrollTop");var v=u>(p.prevScrollTop||0);p.prevScrollTop=u;if(u===0){o(null);return}if(v){if(t.next&&t.next.top<=u){o(t.next);return}if(t.current&&t.next&&t.next.top-u<=t.next.height){l(t.current,u+(t.next.top-t.next.height-u));return}}if(!v){if(t.current&&t.prev&&u<t.current.top){o(t.prev);return}if(t.next&&t.current&&(u>=(t.next.top-t.current.height))){l(t.current,u+(t.next.top-u-t.current.height));return}}if(t.current){l(t.current,u)}}function o(v){if(t.current===v){return}if(t.current){l(t.current,null);r(t.current,null)}if(v){r(v,"active")}t.current=v;var u=t.items.indexOf(v);t.next=t.items[u+1];t.prev=t.items[u-1];r(t.next,"next");r(t.prev,"prev")}function r(u,v){if(!u||u.state===v){return}if(u.state){u.clone.attr("sticky-prev-state",u.state);u.element.attr("sticky-prev-state",u.state)}u.clone.attr("sticky-state",v);u.element.attr("sticky-state",v);u.state=v}function l(v,u){if(!v){return}if(u===null||u===undefined){if(v.translateY){v.translateY=null;v.clone.css(a.CSS.TRANSFORM,"")}}else{v.translateY=u;v.clone.css(a.CSS.TRANSFORM,"translate3d("+v.left+"px,"+u+"px,0)")}}}function h(m){var k;var n=angular.element("<div>");d[0].body.appendChild(n[0]);var j=["sticky","-webkit-sticky"];for(var l=0;l<j.length;++l){n.css({position:j[l],top:0,"z-index":2});if(n.css("position")==j[l]){k=j[l];break}}n.remove();return k}function i(k){var m=200;var n;var j;k.on("scroll touchmove",function(){if(!n){n=true;g.throttle(l);k.triggerHandler("$scrollstart")}k.triggerHandler("$scroll");j=+b.now()});function l(){if(+b.now()-j>m){n=false;k.triggerHandler("$scrollend")}else{k.triggerHandler("$scroll");g.throttle(l)}}}}MdSticky.$inject=["$document","$mdConstant","$$rAF","$mdUtil"];ng.material.components.sticky=angular.module("material.components.sticky");