!function(){angular.module("ngGeolocation",[]).factory("$geolocation",["$rootScope","$window","$q",function(g,f,j){function i(){return"geolocation" in f.navigator}var h={getCurrentPosition:function(b){var a=j.defer();return i()?f.navigator.geolocation.getCurrentPosition(function(c){g.$apply(function(){h.position.coords=c.coords,h.position.timestamp=c.timestamp,a.resolve(c)})},function(c){g.$apply(function(){a.reject({error:c})})},b):a.reject({error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}),a.promise},watchPosition:function(a){i()?this.watchId||(this.watchId=f.navigator.geolocation.watchPosition(function(c){g.$apply(function(){h.position.coords=c.coords,h.position.timestamp=c.timestamp,delete h.position.error,g.$broadcast("$geolocation.position.changed",c)})},function(c){g.$apply(function(){h.position.error=c,delete h.position.coords,delete h.position.timestamp,g.$broadcast("$geolocation.position.error",c)})},a)):h.position={error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}},clearWatch:function(){this.watchId&&(f.navigator.geolocation.clearWatch(this.watchId),delete this.watchId)},position:{}};return h}])}();