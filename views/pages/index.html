<!DOCTYPE html>
<html lang="en" ng-app="StarterApp">
<head>
    <title>Puntos de venta Tess By INGESA</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />

    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:400,500,700,400italic'>
    <link rel="stylesheet" href="./bower_components/angular-material/angular-material.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/css/common.css" />

    <script src="https://maps.google.com/maps/api/js"></script>
    <script src="/bower_components/underscore/underscore-min.js"></script>
    <script src="/bower_components/angular/angular.min.js"></script>
    <script src="/bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="/bower_components/angular-aria/angular-aria.min.js"></script>
    <script src="/bower_components/angular-material/angular-material.min.js"></script>

    <script src="/js/angularMapModule{{ min }}.js"></script>
    <script src="/js/app{{ min }}.js"></script>
</head>

<body ng-controller="AppCtrl">
    <md-button id="menu-button" class="md-fab md-primary" aria-label="Menu" ng-click="toggleRight()">
        <md-icon md-svg-src="/bower_components/angular-material/demos/toolbar/demoBasicUsage/img/icons/menu.svg"></md-icon>
    </md-button>

    <map id="map" points="Ecuador" width="100%" height="100%">
        <div ng-repeat="oficina in oficinas">
            <marker ng-repeat="local in oficina.centros" info="true" points="[[ local.geo ]]">
                <div>
                    <h2>[[ local.nombre ]]</h2>
                    <div><strong>Direccion: </strong>[[ local.direccion ]]</div>
                    <div><strong>Teléfono: </strong>[[ local.telefono ]]</div>
                    <div><strong>Email: </strong>[[ local.email ]]</div>
                    <div><strong>Tipo: </strong>[[ local.tipo ]]</div>

                    <footer>
                        <h3>Como llegar:</h3>
                        <md-button onclick="sideopen(this)" object="{localidad: '[[ $parent.$index ]]', centro: '[[ local.geo ]]', tipo: 'run'}" class="md-fab md-warn material-icons" title="Indicaciones a pie">directions_run</md-button>
                        <md-button onclick="sideopen(this)" object="{localidad: '[[ $parent.$index ]]', centro: '[[ local.geo ]]', tipo: 'car'}" class="md-fab md-warn material-icons" title="Indicaciones en transporte propio">directions_car</md-button>
                        <md-button onclick="sideopen(this)" object="{localidad: '[[ $parent.$index ]]', centro: '[[ local.geo ]]', tipo: 'bus'}" class="md-fab md-warn material-icons" title="Indicaciones en transporte público">directions_bus</md-button>
                    </footer>
                </div>
            </marker>
        </div>
    </map>

    <!-- <div id="map" map-lazy-load="http://maps.google.com/maps/api/js" map-type="">
        <map zoom="7" center="-1.7864639, -78.1368874">
            <div ng-repeat="oficina in oficinas">
                 <div ng-repeat="local in oficina.centros">
                     <marker id="oficina-[[ local.telefono ]]"  position="[[ local.geo ]]" on-click="showInfoWindow(event, 'info-[[ local.telefono ]]')"></marker>
                     <info-window id="info-[[ local.telefono ]]" visible-on-marker="oficina-[[ local.telefono ]]">
                         <div ng-non-bindable="">
                             <header>
                                 <h2>[[ local.nombre ]]</h2>
                                 <h3>[[ local.localidad ]]</h3>
                             </header>
                             <section>
                                 <div><strong>Nombre:</strong> [[ local.nombre ]]</div>
                                 <div><strong>Dirección:</strong> [[ local.direccion ]]</div>
                                 <div><strong>Teléfono:</strong> [[ local.telefono ]]</div>
                                 <div><strong>Email:</strong> [[ local.email ]]</div>
                             </section>
                             <footer>
                                 <h3>Como llegar:</h3>
                                 <md-button class="md-fab md-warn" aria-label="Use Android">
                                     <md-icon md-svg-src="/svg/bicycle.svg"></md-icon>
                                 </md-button>
                                 <md-button class="md-fab md-warn" aria-label="Use Android">
                                     <md-icon md-svg-src="/svg/bus.svg"></md-icon>
                                 </md-button>
                                 <md-button class="md-fab md-warn" aria-label="Use Android">
                                     <md-icon md-svg-src="/svg/car.svg"></md-icon>
                                 </md-button>
                            </footer>
                         </div>
                     </info-window>
                 </div>
            </div>

            <directions
                    draggable="true"
                    panel="directions-panel"
                    travel-mode="DRIVING"
                    origin="[[ local.origen ]]"
                    destination="[[ local.centro ]]">
            </directions>
        </map>
    </div> -->

    <md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="right">
        <div id="content-md-sidenav">
            <md-toolbar>
                <md-button class="width-30 md-raised md-primary" ng-click="close()">Cerrar</md-button>
            </md-toolbar>

            <header class="padding-2">
                <form>
                    <md-input-container flex>
                        <label>Origen</label>
                        <input ng-model="params.origen">
                    </md-input-container>

                    <md-input-container>
                        <label>Localidad</label>
                        <md-select ng-model="params.localidad">
                            <md-option value="[[ $index ]]" ng-repeat="oficina in oficinas">[[ oficina.localidad ]]</md-option>
                        </md-select>
                    </md-input-container>

                    <md-input-container>
                        <label>Local</label>
                        <md-select ng-model="params.centro">
                            <md-option value="[[ centro.geo ]]" ng-repeat="centro in oficinas[params.localidad].centros">[[ centro.nombre ]]</md-option>
                        </md-select>
                    </md-input-container>

                    <md-button class="md-raised md-primary" ng-click="buscar()">Buscar punto de venta</md-button>
                </form>
            </header>
             [[ params|json ]]
            <!-- <section>
                <div id="directions-panel"></div>
            </section> -->
        </div>
    </md-sidenav>
</body>
</html>
